import{j as e,Y as f,a as j,y}from"./app-1232777b.js";import{A as v}from"./AuthenticatedLayout-4cecba7d.js";import{S as p}from"./Select-a7648edf.js";import{D as N}from"./Dropzone-5bfc1712.js";import{I as u}from"./Input-c7792e37.js";import{T as S}from"./TextArea-47aa8356.js";import{z as a,u as w,t as D}from"./zod-f39d316b.js";import{_ as q}from"./index-c96e2231.js";import"./Dropdown-fdee1dac.js";import"./transition-76c4e644.js";import"./ResponsiveNavLink-8d83e236.js";const C=a.object({imagenes:a.array(a.instanceof(File)).min(1,{message:"Debes subir al menos 1 imagen"}).max(5,{message:"No puedes subir más de 5 imágenes"}).refine(s=>s.every(m=>m.size<=5*1024*1024),{message:"Cada archivo debe ser menor a 5 MB"}).refine(s=>s.every(m=>["image/jpeg","image/png","image/gif"].includes(m.type)),{message:"Solo se permiten archivos JPEG, PNG o GIF"}),tipo:a.enum(["1","2"],{errorMap:()=>({message:"Selecciona un tipo válido"})}),sexo:a.enum(["Macho","Hembra"],{errorMap:()=>({message:"Selecciona un tipo válido"})}),edad:a.coerce.number().min(1,{message:"La edad debe ser mayor a 0"}).max(100,{message:"La edad máxima es 100 meses"}),peso:a.coerce.number().min(1,{message:"El peso debe ser mayor que 0"}),descripcion:a.string().min(10,{message:"La descripción debe tener al menos 10 caracteres"}).max(280,{message:"La descripción no puede tener más de 280 caracteres"})}),F=()=>{const{register:s,handleSubmit:m,setValue:d,watch:x,reset:g,formState:{errors:t,isSubmitting:r}}=w({mode:"onChange",resolver:D(C),defaultValues:{imagenes:[],tipo:"1",sexo:"Macho"}}),b=async o=>{const c=new FormData;for(const i in o)if(o.hasOwnProperty(i)){const n=o[i];if(n instanceof Array)for(let l=0;l<n.length;l++)c.append(i+"[]",n[l]);else c.append(i,n)}try{const{data:i}=j.post("/dar-adopcion/store",c);g(),q.success("Adopción registrada"),y.visit("/myadoptions")}catch(i){console.log(i)}},h=x("imagenes");return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"p-4 sm:p-8 bg-white shadow sm:rounded-lg",children:e.jsxs("section",{className:"max-w-xl",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Información de la mascota"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Completa la información de tu mascota que deseas dar en adopción."})]}),e.jsxs("form",{className:"mt-6 space-y-6",onSubmit:m(b),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{id:"tipo",className:"mt-1 block w-full",label:"Selecciona el tipo de tu mascota",onChange:o=>d("tipo",o.target.value),required:!0,autoComplete:"tipo",errors:t.tipo,disabled:r,options:[{id:"1",nombre:"Perro"},{id:"2",nombre:"Gato"}]}),e.jsx(p,{id:"sexo",className:"mt-1 block w-full",label:"Selecciona el sexo de tu mascota",onChange:o=>d("sexo",o.target.value),required:!0,autoComplete:"sexo",errors:t.sexo,disabled:r,options:[{id:"Macho",nombre:"Macho"},{id:"Hembra",nombre:"Hembra"}]}),e.jsx(u,{id:"edad",label:"Edad",required:!0,type:"number",errors:t.edad,disabled:r,register:s}),e.jsx(u,{id:"peso",label:"Peso",required:!0,type:"number",errors:t.peso,disabled:r,register:s})]}),e.jsx(S,{id:"descripcion",label:"Descripción",required:!0,type:"text",errors:t.descripcion,disabled:r,register:s}),e.jsx(N,{setImage:d,images:h,errors:t.imagenes,isDisabled:r}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{type:"submit",disabled:r,className:"p-2 bg-custom-gold text-white rounded-md",children:"Enviar"})})]})]})})})})]})};F.layout=s=>e.jsx(v,{children:s,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dar en adopción"})});export{F as default};
